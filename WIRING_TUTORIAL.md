# 树莓派硬件连接超详细图文指南

本指南将手把手教你如何将传感器连接到树莓派 5。请仔细阅读，**接错线可能会烧坏主板！**

## 1. 认识树莓派 GPIO 引脚

将树莓派有 USB 接口的一侧对着自己，双排 GPIO 针脚在上方。

- **最左上角**的引脚是 **Pin 1 (3.3V)**，它是个方块形的焊盘（如果看背面的话），通常旁边印有 P1。
- **Pin 1** 的右边是 **Pin 2 (5V)**。
- 下图是前 20 个引脚的定义（只需关注我们要用的）：

```
[树莓派边缘]
-----------------------------------------
(3.3V) Pin 1  | . . | Pin 2  (5V)   <-- 给MQ-2供电
(GPIO2)Pin 3  | . . | Pin 4  (5V)
(GPIO3)Pin 5  | . . | Pin 6  (GND)  <-- DHT22 地线
(GPIO4)Pin 7  | . . | Pin 8  (TXD)  <-- DHT22 数据线
(GND)  Pin 9  | . . | Pin 10 (RXD)  <-- MQ-2 地线
(GPIO17)Pin11 | . . | Pin 12 (GPIO18)<-- MQ-2 数据线
...
-----------------------------------------
```

---

## 2. 连接 MQ-2 烟雾传感器

MQ-2 模块通常有 4 个针脚，我们只用 3 个（AO 模拟引脚不用，因为树莓派没有模拟输入）。

**所需引脚**：VCC, GND, DO (Digital Output)

1.  **VCC (电源正极)** -> 连接到树莓派 **Pin 2 (5V)**
    *   *解释*: MQ-2 内部有加热丝，必须接 5V 才能正常工作，接 3.3V 可能没反应。
2.  **GND (电源负极)** -> 连接到树莓派 **Pin 9 (GND)** (或者 Pin 6, 14, 20 等任意 GND)
3.  **DO (数据输出)** -> 连接到树莓派 **Pin 11 (GPIO 17)**

**⚠️ 警告**: 
MQ-2 的 DO 引脚输出的高电平通常是 5V，而树莓派 GPIO 只接受 3.3V。直接连接**有风险**！
- **最安全做法**: 找两个电阻（比如 1kΩ 和 2kΩ）做分压电路。
- **简易做法**: 如果没有电阻，许多市售 MQ-2 模块带有保护二极管，可以直接连。或者你可以暂时把 VCC 接在 3.3V (Pin 1) 上试一下，虽然预热慢，但绝对安全。

---

## 3. 连接 DHT22 温湿度传感器

DHT22 模块通常有 3 个针脚（如果是 4 针裸元件，需要自己加电阻，这里假设你买的是带 PCB 的 3 针模块）。

**所需引脚**：VCC (+), GND (-), DAT (Out)

1.  **VCC (+)** -> 连接到树莓派 **Pin 1 (3.3V)**
    *   *注意*: DHT22 也可以接 5V，但为了数据线电平安全匹配树莓派，建议接 3.3V。
2.  **GND (-)** -> 连接到树莓派 **Pin 6 (GND)**
3.  **DAT (数据)** -> 连接到树莓派 **Pin 7 (GPIO 4)**

---

## 4. 连接摄像头

### 选项 A: USB 摄像头
直接插入树莓派任意一个 USB 接口（推荐蓝色的 USB 3.0 接口）。

### 选项 B: CSI 摄像头 (15-pin 宽排线)
如果你使用的是树莓派 4B，它的摄像头接口是 **Standard CSI (15-pin)**，这种接口比树莓派 5/Zero 的宽。

1.  **找到接口**: 树莓派 4B 上有两个相似的接口，一个是 `DISPLAY` (靠近USB口)，一个是 `CAMERA` (在 HDMI 接口和音频接口之间)。请插在 **CAMERA** 接口上！
2.  **连接步骤**:
    *   轻轻拨起接口上的黑色卡扣。
    *   将排线插入，**蓝色胶带面朝向以太网/USB接口方向** (也就是金属触点朝向 HDMI 接口方向)。
    *   按下卡扣固定。
3.  **系统配置**:
    *   旧版树莓派 OS (Bullseye之前) 需要 `raspi-config` -> Interface Options -> Legacy Camera -> Enable。
    *   新版 OS (Bookworm/Bullseye) 默认使用 `libcamera`，通常插上就能用。
    *   如果无法识别，尝试编辑 `/boot/config.txt` (旧版) 或 `/boot/firmware/config.txt` (新版)，添加 `dtoverlay=ov5647` (如果是500万像素) 或 `dtoverlay=imx219` (如果是800万像素)。

---

## 5. 检查清单

在通电之前，请进行最后的“灵魂三问”：

1.  **VCC 和 GND 反了吗？** (接反必烧模块，甚至烧树莓派)
2.  **5V 连到 3.3V 针脚了吗？** (严禁将 5V 电源线碰到 3.3V 或 GPIO 针脚)
3.  **线头有裸露接触吗？** (防止短路)

确认无误后，给树莓派通电开机。

---

## 6. 软件测试

连接好后，在树莓派终端运行这个简单的 Python 脚本测试一下（在 `fireDetect` 目录下）：

```python
# test_gpio.py
import RPi.GPIO as GPIO
import time

# 设置模式
GPIO.setmode(GPIO.BCM)

# 定义引脚
MQ2_PIN = 17

# 设置输入
GPIO.setup(MQ2_PIN, GPIO.IN)

try:
    while True:
        status = GPIO.input(MQ2_PIN)
        print(f"MQ-2 状态: {status} (0代表有烟, 1代表正常)") # 具体0/1定义看模块
        time.sleep(1)
except KeyboardInterrupt:
    GPIO.cleanup()
```
